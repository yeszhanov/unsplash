{"version":3,"file":"static/webpack/static/development/pages/index.js.26fdf7fc99ef611d89fb.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, { Component, useEffect, useState } from \"react\"\nimport axios from \"axios\"\nimport ImageWrapper from \"../components/ImageWrapper\"\nimport InfiniteScroll from \"react-infinite-scroller\"\nimport SearchBar from \"../components/SearchBar\"\n\nimport \"./index.css\"\nconst APP_ID =\n  // \"40ccb0c7498a3968ef87cb8aaf6e239d6d319157718c550adfe4b74942ffbc7d\"\n  // \"75c17e375bb7f1947c0d7a32bbb85266511f0b099485492db887fb79c6ef40e6\"\n  // \"5fb3168316b9dbcd49a7a52129ae0f48c358dda1915d87bd96f7b7c3a35bf3b2\"\n  // \"75eab7600bf1c0159118b5d5fedfa1d2c16a2c1ec2c14dab57832738852ee432\"\n  \"895610a3fb50700d2debe54878a3a62fd03e5ef1702228170fd8aff327db6f1a\"\nclass Index extends Component {\n  state = {\n    isSearching: false,\n    images: [],\n    search: \"\",\n    result: [],\n  }\n  searchImages() {\n    axios\n      .get(\n        `https://api.unsplash.com/search/photos/?page=1&per_page=10&query=${\n          this.state.search\n        }&client_id=${APP_ID}`,\n      )\n      .then(data => {\n        this.setState({\n          result: [...this.state.result, ...data.data.results],\n        })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n  onSearch(val) {\n    this.setState({\n      search: val,\n      isSearching: true,\n    })\n  }\n  getImages(count = 10) {\n    axios\n      .get(\n        `https://api.unsplash.com/photos/random?client_id=${APP_ID}&count=${count}`,\n      )\n      .then(data => {\n        this.setState({\n          images: [...this.state.images, ...data.data],\n        })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  componentDidMount() {\n    this.getImages()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.search !== this.state.search) {\n      this.setState({\n        result: [],\n      })\n      this.searchImages()\n    }\n\n    console.log(this.state.result)\n  }\n\n  render() {\n    const { images, result, isSearching } = this.state\n    return (\n      <div className=\"wrapper\">\n        <SearchBar onSearch={val => this.onSearch(val)} />\n        <InfiniteScroll\n          loadMore={\n            result ? () => this.searchImages() : () => this.getImages(5)\n          }\n          pageStart={0}\n          hasMore={true}\n          loader={\n            <div className=\"loader\" key={0}>\n              Loading ...\n            </div>\n          }\n        >\n          <div className=\"image-grid\">\n            {isSearching\n              ? result.map((item, idx) => {\n                  return (\n                    <ImageWrapper\n                      url={item.urls.small}\n                      key={idx}\n                      onClick={() => console.log(\"url\")}\n                    />\n                  )\n                })\n              : images.map((item, idx) => {\n                  return (\n                    <ImageWrapper\n                      url={item.urls.small}\n                      key={idx}\n                      onClick={() => console.log(\"url\")}\n                    />\n                  )\n                })}\n          </div>\n          {}\n        </InfiniteScroll>\n      </div>\n    )\n  }\n}\n\nexport default Index\n// const Index = () => {\n//   const [images, setData] = useState([])\n//   const [search, setSearch] = useState(\"\")\n//   const [result, setResult] = useState(null)\n//   useEffect(() => {\n//     getImages()\n//   }, [])\n//   useEffect(() => {\n//     console.log(images)\n//   })\n//   useEffect(() => {\n//     searchImages()\n//   }, [search])\n//   const searchImages = count => {\n//     axios\n//       .get(\n//         `https://api.unsplash.com/search/photos/?page=1&per_page=${count}&query=${search}&client_id=${APP_ID}`,\n//       )\n//       .then(data => {\n//         setResult([...data.data.results, ...result])\n//       })\n//       .catch(err => {\n//         console.log(\"Error happened during fetching!\", err)\n//       })\n//   }\n//   const getImages = (count = 10) => {\n//     axios\n//       .get(\n//         `https://api.unsplash.com/photos/random?client_id=${APP_ID}&count=${count}`,\n//       )\n//       .then(data => {\n//         setData([...images, ...data.data])\n//       })\n//       .catch(err => {\n//         console.log(err)\n//       })\n//   }\n\n//   const onSearch = val => {\n//     setSearch(val)\n//   }\n//   return (\n//     <div className=\"wrapper\">\n//       <SearchBar onSearch={val => onSearch(val)} />\n//       <InfiniteScroll\n//         loadMore={search ? () => searchImages(5) : () => getImages(5)}\n//         pageStart={0}\n//         hasMore={true}\n//         loader={\n//           <div className=\"loader\" key={0}>\n//             Loading ...\n//           </div>\n//         }\n//       >\n//         <div className=\"image-grid\">\n//           {images\n//             ? images.map((item, idx) => {\n//                 return <ImageWrapper url={item.urls.small} key={idx} />\n//               })\n//             : null}\n//         </div>\n//       </InfiniteScroll>\n//     </div>\n//   )\n// }\n\n// export default Index\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;;;;;;AAKA;AAAA;AACA;AAAA;AAOA;AACA;AADA;AAGA;AAEA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAFA;AAIA;;;AACA;AAAA;AACA;AADA;AACA;AAKA;AACA;AADA;AAGA;AAEA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAMA;;;;AArGA;AACA;AAuGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;A","sourceRoot":""}